
========
= ROOM =
========

room is place defined with one photograph.

room has attributes:
- name: unique name
- image: image file name (from folder fotos)
- areas: collection od areas

area is entity that defines clickable space in room
area has attributes:
    - requisite: name of flag that has to be set for this area to be rendered. e.g.: requisite:"butterfly"
    - desc: not used in code (for user's reference only, to easier handle json file)
    - top, left, width, height: position and size of area rectangle
    - cursor: image for cursor
        - back
        - left
        - right
        - up
        - hand
        - disabled

    - actions: collection of action that executes when used clicks area
        types of actions are:
            - setRoom: loads another room. Mandatory parameter 'room' holds name of new room. e.g.: {action:"setRoom",room:"room_1_o2"}
            - setChat: starts new chat. 
                Mandatory parameter 'chat' hold name of new chat. 
                Optional parameter 'clearChoices' will erase existing buttons if exist 
                e.g.: {action:"setChat",chat:"chat_0_06_noback",clearChoices:true}
            - setChatAndClearHistory: same as setChat, except in cleans all previous chats from phone. e.g.: {action:"setChatAndClearHistory",chat:"chat_0_06"}
            - animateLose: executes lose animation. e.g.: {action:"animateLose"}
            - animateWin: executes win animation. e.g.: {action:"animateWin"}
            - drainBattery: battery value is reduced. Mandatory parameter: amount (number). e.g.: {action:"drainBattery",amount:1}
            
========
= CHAT =
========

chat is segment of dialogue in phone.

chat has attributes:
- type: defines type of chat. Available type are:

    - playerLine: writes one line of dialogue as written by player. Parameters are:
        - line: line of spoken text
        - delay: how long it will be waited before line is shown (in miliseconds.) If delay is bigger than 500 the typing animation will be shown.

    - eginaLine:  writes one line of dialogue as written by egina. Same usage as playerLine.
        
    - playerImage: shows image to dialogue as sent by player
        - url: image
        - w: width of image
        - h: height of image
        e.g. :{"type": "eginaImage", "url": "chat/0-02.jpg", "w": 200, "h": 200}

    - eginaImage: shows image to dialogue as sent by egina. Same usage as playerLine.

    - rollNext: executes next chat. Parameters are:
        - next: function rhat wil lexecute next (only SetChat is supported at the moment)                                       !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! MOŽDA RIJEŠITI
        - chat: the chat that will be loaded next
        e.g. : {"type": "rollNext", "next": "setChat", "chat": "chat_0_03" }

    - choice: shows buttons, where continuation of dialogue is defined by player's choice. Parameters of each button are:
        - text: button text
        - next: next funtion (only SetChat is supported at the moment)                                       !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! MOŽDA RIJEŠITI
        - chat: name of next chat
        - func: addition function to be executed with area is clicked
        - drainBattery: battery value is reduced. Mandatory parameter: amount (number).
        - setProgress: sets string in progress variable. progress variable hold keys verifiable with requisite proprety of area
        - removeChoices: removes buttons

        example.
        {
            "type": "choice",
            "choices": [
                {
                    "text": "Rokoko",
                    "next": "setChat",
                    "chat": "chat_1_03win",
                    "func": "animateWin",
                    "setProgress": "butterfly" // now area marked with requisite: butterfly will be rendered to player
                },{
                    "text": "Bidermajer",
                    "next": "setChat",
                    "chat": "chat_1_03lose",
                    "func": "animateLose",
                    "drainBattery": 5
                }
            ],
        }

        Tokens can be set inside text field.
        [battery] - shows current battery level.

=====================
= KEYBOARD COMMANDS =
=====================

wasd / arrows   : move user (based on icons on area)
spacebar        : toggles phone position.
.               : speed up dialogues in whole game (cannot be reverted, restart game)


